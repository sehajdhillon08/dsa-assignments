#include <bits/stdc++.h>
using namespace std;

struct Node{
    int val;
    Node *left,*right;
    Node(int x){val=x;left=right=NULL;}
};

Node* buildTree(vector<int>&in,int is,int ie,vector<int>&post,int ps,int pe){
    if(is>ie || ps>pe) return NULL;
    Node* root=new Node(post[pe]);
    int k=is;
    while(in[k]!=post[pe]) k++;
    int leftSize=k-is;
    root->left=buildTree(in,is,k-1,post,ps,ps+leftSize-1);
    root->right=buildTree(in,k+1,ie,post,ps+leftSize,pe-1);
    return root;
}

void preorder(Node* r){
    if(!r) return;
    cout<<r->val<<" ";
    preorder(r->left);
    preorder(r->right);
}

int main(){
    int n; cin>>n;
    vector<int> in(n), post(n);
    for(int i=0;i<n;i++) cin>>in[i];
    for(int i=0;i<n;i++) cin>>post[i];

    Node* root=buildTree(in,0,n-1,post,0,n-1);
    preorder(root);
}
